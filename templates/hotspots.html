<!DOCTYPE html>
<html lang="en">
{% include 'header.html' %}
<head>
    <meta charset="UTF-8">
    <title> Hotspots </title>
</head>
<body>
    {% include 'format.html' %}

    <div id="hotspot-list">
    </div>

</body>
<script>
    $(document).on('click', '.positive-info', function(){
        $(this).parent().find(".hotspots").toggle();
    });

         $.ajax({
            url: '/getHotspot',
            methods : 'GET'
        }).done(function(data){
            let html = '';

            $.each(data, function(p_sn, p_data){
                let dates = data.dates;
                html += '<div class="positive" data-sn="'+p_sn+'">';
                html += '    <div class="positive-info">';
                html += '        <span class="positive-title-num">';
                html += '        Positive Case #'+p_sn+'';
                html += '        </span>';
                html += '        <div class="positive-id">';
                html += '            <span> Sex : '+data.p_sex+' | </span>';
                html += '            <span> Age Group : '+data.p_sex+' | </span>';
                html += '            <span> Affiliation : '+data.aff_nm+' </span>';
                html += '        </div>';
                html += '    </div>';
                html += '    <div class="hotspots" style="display:none;">';
                $.each(dates, function(date, times){
                    html += '        <div class="hotspots-day">';
                    html += '            <span class="hotspots-date"> '+date+' </span>';
                    html += '            <div class="hotspots-desc">';
                    $.each(times, function(time, desc){
                        html += '                <div>';
                        html += '                    <span> '+time+' </span>';
                        html += '                    <span> '+desc+' </span>';
                        html += '                </div>';
                    });
                html += '            </div>';
                html += '        </div>';
                });
                html += '    </div>';
                html += '</div>';
            });

            $("#hotspot-list").html(html);
        });

</script>
</html>


